(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{274:function(e,t,s){},275:function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),r=s(110),n=s.n(r),l=s(2),i=s(12),o=s(20),d=s(17),u=s(0),j=function(){var e=JSON.parse(localStorage.getItem("picture"));return Object(u.jsxs)("div",{className:"flex sticky top-0 w-full bg-white justify-between items-center border-b-2 border-black-100 h-20  p-5  ",children:[Object(u.jsx)(d.b,{to:"/main",children:Object(u.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer ",children:[Object(u.jsx)("img",{className:"w-10",src:"https://assets.stickpng.com/images/580b57fcd9996e24bc43c521.png",alt:"logo"}),Object(u.jsx)("img",{src:"https://logos-marques.com/wp-content/uploads/2020/09/Instagram-Logo.png",className:"mt-1 hidden lg:flex",alt:"logo-instagram",width:"100"})]})}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"search",className:"shadow hidden sm:flex w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",placeholder:"Search"})}),Object(u.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[Object(u.jsx)(d.b,{to:"/main",children:Object(u.jsx)("div",{className:"flex items-center justify-center rounded-full bg-gray-200  w-10 h-10",children:Object(u.jsx)(i.a,{icon:o.d,className:"text-xl  text-red-600 cursor-pointer "})})}),Object(u.jsx)(d.b,{to:"/chat",children:Object(u.jsx)("div",{className:"flex   items-center justify-center rounded-full bg-gray-200 w-10 h-10 hover:text-red-600 cursor-pointer",children:Object(u.jsx)(i.a,{icon:o.e,className:"text-xl  "})})}),Object(u.jsx)("div",{className:"flex opacity-50 items-center justify-center rounded-full bg-gray-200 w-10 h-10 hover:text-red-600 cursor-pointer",children:Object(u.jsx)(i.a,{icon:o.c,className:"text-xl cursor-pointer "})}),Object(u.jsx)(d.b,{to:"/login",children:Object(u.jsx)("div",{className:"flex items-center justify-center rounded-full bg-gray-200 w-10 h-10 hover:text-red-600 cursor-pointer",onClick:function(){localStorage.clear()},children:Object(u.jsx)(i.a,{icon:o.g,className:"text-xl cursor-pointer "})})}),Object(u.jsx)(d.b,{to:"/profile",children:Object(u.jsx)("img",{src:e,alt:"user",width:"",className:"rounded-full cursor-pointer w-10 h-10 hover:border-gray-700 border-2"})})]})]})},m=s(4),x=s.n(m),b=s(13),p=s(18),h=s(8),O=s.n(h),f=s(19),v=function(e){var t=e.user,s=e.id,a=e.userPicture,r=e.reacts,n=e.description,d=e.picture,j=Object(c.useRef)(null),m=Object(c.useRef)(null),h=Object(c.useState)([]),v=Object(l.a)(h,2),g=v[0],N=v[1],w=Object(c.useState)(r),y=Object(l.a)(w,2),S=y[0],k=y[1],I=Object(c.useState)(!1),J=Object(l.a)(I,2),C=J[0],_=J[1],P=Object(c.useState)(""),D=Object(l.a)(P,2),E=D[0],B=D[1],q=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem("id"));case 2:return t=e.sent,e.prev=3,e.next=6,O.a.post("http://localhost:3001/getlike",{userId:t,postId:s});case 6:"Likes found"===e.sent.data.message?j.current&&_(!0):j.current&&_(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("http://localhost:3001/getcomment",{postId:s});case 3:t=e.sent,N(t.data),console.log(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("http://localhost:3001/removecomment",{commId:t});case 2:s=g.filter((function(e){return e._id!==t})),N(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){j.current&&q(),j.current&&R()}),[]);var A=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(window.localStorage.getItem("id")),!1!==C){e.next=16;break}return k(S+1),_(!0),e.prev=4,e.next=7,O.a.put("http://localhost:3001/addlike",{id:s,like:1});case 7:return e.next=9,O.a.post("http://localhost:3001/addlike/likes",{userId:t,postId:s});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:e.next=22;break;case 16:return k(S-1),_(!1),e.next=20,O.a.put("http://localhost:3001/removelike",{id:s,likes:-1});case 20:return e.next=22,O.a.post("http://localhost:3001/removelike/likes",{userId:t,postId:s});case 22:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(x.a.mark((function e(t){var c,a,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=JSON.parse(window.localStorage.getItem("id")),a=JSON.parse(window.localStorage.getItem("userName")),t.preventDefault(),""===m.current.value){e.next=17;break}return e.prev=4,e.next=7,O.a.post("http://localhost:3001/addcomment",{userId:c,postId:s,comment:E});case 7:r=e.sent,n={_id:r.data._id,userId:{_id:c,userName:a},description:E},N([].concat(Object(p.a)(g),[n])),B(""),m.current.value="",e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"flex flex-col justify-between border-2 border-black-100  rounded-lg mb-5",ref:j,children:[Object(u.jsxs)("div",{className:"flex justify-between items-center p-3",children:[Object(u.jsxs)("div",{className:"flex items-center",children:[Object(u.jsx)("img",{src:a,width:"45",className:"rounded-full border-2  border-gray-200",alt:""}),Object(u.jsx)("p",{className:"text-xs ml-3 font-semibold",children:t})]}),Object(u.jsx)("div",{children:Object(u.jsx)(i.a,{icon:o.a,className:"text-xl cursor-pointer "})})]}),Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:d,width:"700",height:"900",alt:"user"})}),Object(u.jsxs)("div",{className:"flex justify-between items-center px-3 pt-3",children:[Object(u.jsxs)("div",{className:"flex",children:[C?Object(u.jsx)(i.a,{icon:f.c,className:"text-2xl cursor-pointer text-red-600 mr-0 ",onClick:A}):Object(u.jsx)(i.a,{icon:f.c,className:"text-2xl cursor-pointer  mr-0 ",onClick:A}),Object(u.jsx)(i.a,{icon:f.b,className:"text-2xl cursor-pointer ml-4 "}),Object(u.jsx)(i.a,{icon:f.d,className:"text-2xl cursor-pointer ml-3 "})]}),Object(u.jsx)("div",{children:Object(u.jsx)(i.a,{icon:f.a,className:"text-2xl cursor-pointer "})})]}),Object(u.jsxs)("p",{className:"px-3 pt-1 font-semibold ",children:[S," likes"]}),Object(u.jsxs)("div",{className:"px-3 pt-1 text-sm",children:[Object(u.jsx)("span",{className:"font-semibold text-sm",children:t})," ",n]}),Object(u.jsx)("p",{className:"px-3 pt-2 text-sm text-gray-400",children:"Show more comments"}),Object(u.jsx)("div",{children:g.map((function(e){return Object(u.jsxs)("div",{className:"flex justify-between items-center",children:[Object(u.jsxs)("div",{className:"px-3 pt-2 text-sm flex gap-2",children:[Object(u.jsxs)("div",{className:"font-semibold",children:[e.userId.userName," :"]}),Object(u.jsx)("div",{children:e.description})]},e._id),e.userId._id===JSON.parse(localStorage.getItem("id"))&&Object(u.jsx)("div",{className:"px-3",onClick:function(){return T(e._id)},children:Object(u.jsx)(i.a,{icon:f.f,className:"text-sm cursor-pointer "})})]})}))}),Object(u.jsx)("p",{className:"px-3 pt-4 text-xs text-gray-400",children:"8 MINUTES AGO"}),Object(u.jsx)("form",{onSubmit:F,children:Object(u.jsxs)("div",{className:"flex justify-between items-center p-4 mt-3 border-2 rounded-lg border-black-100",children:[Object(u.jsxs)("div",{className:"flex gap-3",children:[Object(u.jsx)(i.a,{icon:f.e,className:"text-2xl cursor-pointer "}),Object(u.jsx)("input",{ref:m,type:"text",placeholder:"Add a comment...",className:"border-0 focus:outline-none text-sm",onChange:function(e){return B(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",className:"text-blue-500 cursor-pointer text-sm font-semibold",children:"Post"})})]})})]})},g=s(30),N=s.n(g),w=function(){var e=Object(c.useRef)(null),t=Object(c.useState)([]),s=Object(l.a)(t,2),a=s[0],r=s[1],n=Object(c.useState)(!1),i=Object(l.a)(n,2),o=i[0],d=i[1],j=function(){var t=Object(b.a)(x.a.mark((function t(){var s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,O.a.get("http://localhost:3001/getposts");case 4:s=t.sent,d(!1),e.current&&r(s.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){e.current&&j()}),[]),!1===o?Object(u.jsx)("div",{className:"main mt-3 ",ref:e,children:a.map((function(e,t){return Object(u.jsx)(v,{id:e._id,user:e.userId.userName,userPicture:e.userId.userPicture,reacts:e.likes,description:e.description,picture:e.image},e._id)}))}):Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"flex justify-center items-center mt-16 ",children:Object(u.jsx)(N.a,{type:"Oval",color:"#D0312D",height:50,width:50})})})},y=function(){var e=JSON.parse(localStorage.getItem("fullName")),t=JSON.parse(localStorage.getItem("userName")),s=JSON.parse(localStorage.getItem("picture"));return Object(u.jsxs)("div",{className:"mt-8 lg:grid grid-cols-3 gap-6 ",children:[Object(u.jsx)("div",{className:"col-span-2",children:Object(u.jsx)(w,{})}),Object(u.jsx)("div",{className:"col-span-1 lg:flex flex-col hidden  ",children:Object(u.jsxs)("div",{className:"flex flex-col gap-2 p-5 border-2 border-black-100 rounded-lg",children:[Object(u.jsxs)("div",{className:"flex justify-between items-center",children:[Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(d.b,{to:"/profile",children:Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:s,width:"58",className:"rounded-full flex-grow-0",alt:""})})}),Object(u.jsxs)("div",{className:"ml-3",children:[Object(u.jsx)(d.b,{to:"/profile",children:Object(u.jsx)("p",{className:"text-xs mt-1 font-medium cursor-pointer",children:t})}),Object(u.jsx)("p",{className:"text-xs mt-1 text-gray-600 font-medium",children:e})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"text-blue-600 text-sm cursor-pointer font-semibold",children:"Switch"})})]}),Object(u.jsxs)("div",{className:"flex justify-between mt-3 items-center ",children:[Object(u.jsx)("div",{className:"text-gray-500 font-semibold",children:"Suggestions For You"}),Object(u.jsx)("div",{className:"text-gray-500 cursor-pointer",children:"See all"})]})]})})]})},S=function(){return Object(u.jsxs)("div",{className:"flex gap-10 flex-col justify-center items-center mt-20 w-full",children:[Object(u.jsx)("h1",{className:"font-bold text-4xl",children:"Oops... Wrong page"}),Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded ",children:"Return to Home page"})})]})};var k,I=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),s=t[0],a=t[1];return Object(c.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("token"));a(!!e)}),[]),s?Object(u.jsxs)("div",{children:[Object(u.jsx)(j,{}),Object(u.jsx)(y,{})]}):Object(u.jsx)(S,{})},J=s(66),C=s(33),_=s(14),P=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),s=t[0],a=t[1],r=Object(c.useState)(!1),n=Object(l.a)(r,2),i=n[0],o=n[1],j=Object(_.f)(),m=function(){var e=Object(b.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("http://localhost:3001/login",{email:t.email,password:t.password});case 2:200===(s=e.sent).status?(a(!1),localStorage.setItem("token",JSON.stringify(s.data.token)),localStorage.setItem("id",JSON.stringify(s.data.id)),localStorage.setItem("fullName",JSON.stringify(s.data.fullName)),localStorage.setItem("userName",JSON.stringify(s.data.userName)),localStorage.setItem("picture",JSON.stringify(s.data.picture)),o(!0),setTimeout((function(){o(!1),j.push("/main")}),3e3)):201===s.status&&a(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=C.a({email:C.b().required("Required").email("Invalid Email format"),password:C.b().required("Required")}),h=Object(J.a)({initialValues:{email:"",password:""},onSubmit:m,validationSchema:p});return Object(u.jsx)("div",{className:"mt-5 flex flex-col justify-center items-center",children:Object(u.jsxs)("div",{className:"flex flex-col justify-center items-center mt-16 shadow-2xl border-2 p-10 ",children:[Object(u.jsx)("div",{className:"text-4xl",children:"Instagram"}),s?Object(u.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 mt-5 rounded ",role:"alert",children:[Object(u.jsx)("strong",{className:"font-bold",children:"Invalid ! "}),Object(u.jsx)("span",{className:"block sm:inline",children:"Email or Password are invalid !"})]}):null,Object(u.jsx)("div",{className:"mt-6 ",children:Object(u.jsxs)("form",{onSubmit:h.handleSubmit,className:"flex flex-col items-center justify-center p-5",children:[Object(u.jsxs)("div",{className:"mb-6 w-64",children:[Object(u.jsx)("input",{type:"text",id:"email",name:"email",className:"shadow  w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",onChange:h.handleChange,onBlur:h.handleBlur,value:h.values.email,placeholder:"Email"}),Object(u.jsx)("div",{className:" text-red-600 text-sm ml-1",children:h.touched.email&&h.errors.email?Object(u.jsxs)("div",{children:[" ",h.errors.email," ! "]}):null})]}),Object(u.jsxs)("div",{className:"w-64",children:[Object(u.jsx)("input",{type:"password",id:"password",name:"password",className:"shadow  w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",placeholder:"Password",onChange:h.handleChange,value:h.values.password,onBlur:h.handleBlur}),Object(u.jsx)("div",{className:" text-red-600 text-sm ml-1",children:h.touched.password&&h.errors.password?Object(u.jsxs)("div",{children:[" ",h.errors.password," ! "]}):null})]}),Object(u.jsx)("div",{className:"w-full mt-6",children:Object(u.jsx)("input",{type:"submit",value:"Log in",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded w-full cursor-pointer "})}),i?Object(u.jsx)("div",{className:"mt-5",children:Object(u.jsx)(N.a,{type:"Puff",color:"#2563EB",height:35,width:35})}):null,Object(u.jsxs)("div",{className:"mt-8",children:["Don't have an account?"," ",Object(u.jsxs)(d.b,{to:"/",children:[Object(u.jsx)("span",{className:"text-blue-500 font-semibold cursor-pointer",children:"Sign up"})," "]})]})]})})]})})},D=function(){var e=Object(_.f)(),t=Object(c.useState)(!1),s=Object(l.a)(t,2),a=s[0],r=s[1],n=Object(c.useState)(!1),i=Object(l.a)(n,2),o=i[0],j=i[1],m=function(){var t=Object(b.a)(x.a.mark((function t(s){var c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("http://localhost:3001/adduser",{email:s.email,fullName:s.fullName,userName:s.username,picture:"https://avatars.dicebear.com/api/croodles/".concat(s.username,".svg"),password:s.password});case 2:c=t.sent,console.log(c),console.log("email already used"===c.data.message),"email already used"===c.data.message&&(r(!0),setTimeout((function(){r(!1)}),3500)),"username already used"===c.data.message&&(j(!0),setTimeout((function(){j(!1)}),3500)),200===c.status&&e.push("/login");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=C.a({email:C.b().required("Required").email("Invalid Email format"),fullName:C.b().required("Required"),username:C.b().required("Required"),password:C.b().required("Required")}),h=Object(J.a)({initialValues:{email:"",fullName:"",username:"",password:""},onSubmit:m,validationSchema:p});return Object(u.jsx)("div",{className:"mt-8 flex flex-col justify-center items-center ",children:Object(u.jsxs)("div",{className:"flex flex-col justify-center items-center mt-4 shadow-2xl border-2 p-10 ",children:[Object(u.jsx)("div",{className:"text-4xl",children:"Instagram"}),Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:h.handleSubmit,className:"flex flex-col items-center justify-center p-5",children:[Object(u.jsxs)("div",{className:"mb-6 w-64",children:[Object(u.jsx)("input",{type:"text",id:"email",name:"email",className:"shadow  w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",onChange:h.handleChange,onBlur:h.handleBlur,value:h.values.email,placeholder:"Email"}),Object(u.jsxs)("div",{className:" text-red-600 text-sm ml-1",children:[h.touched.email&&h.errors.email?Object(u.jsxs)("div",{children:[" ",h.errors.email," ! "]}):null,a?Object(u.jsx)("div",{children:" Email already used ! "}):null]})]}),Object(u.jsxs)("div",{className:"w-64 mb-6",children:[Object(u.jsx)("input",{type:"text",id:"fullName",name:"fullName",className:"shadow  w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",onChange:h.handleChange,value:h.values.fullName,onBlur:h.handleBlur,placeholder:"Full name"}),Object(u.jsx)("div",{className:" text-red-600 text-sm ml-1",children:h.touched.fullName&&h.errors.fullName?Object(u.jsxs)("div",{children:[" ",h.errors.fullName," ! "]}):null})]}),Object(u.jsxs)("div",{className:"w-64 mb-6",children:[Object(u.jsx)("input",{type:"text",id:"username",name:"username",className:"shadow  w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",placeholder:"Username",onChange:h.handleChange,onBlur:h.handleBlur,value:h.values.username}),Object(u.jsxs)("div",{className:" text-red-600 text-sm ml-1",children:[h.touched.username&&h.errors.username?Object(u.jsxs)("div",{children:[" ",h.errors.username," ! "]}):null,o?Object(u.jsx)("div",{children:" Username already used ! "}):null]})]}),Object(u.jsxs)("div",{className:"w-64 mb-6",children:[Object(u.jsx)("input",{type:"password",id:"password",name:"password",className:"shadow  w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md",placeholder:"Password",onChange:h.handleChange,value:h.values.password,onBlur:h.handleBlur}),Object(u.jsx)("div",{className:" text-red-600 text-sm ml-1",children:h.touched.password&&h.errors.password?Object(u.jsxs)("div",{children:[" ",h.errors.password," ! "]}):null})]}),Object(u.jsx)("div",{className:"w-full",children:Object(u.jsx)("input",{type:"submit",value:"Sign up",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-2 rounded w-full cursor-pointer"})}),Object(u.jsxs)("div",{className:"mt-4 ",children:["Have an account?"," ",Object(u.jsxs)(d.b,{to:"/login",children:[Object(u.jsx)("span",{className:"text-blue-500 font-semibold cursor-pointer",children:"Sign in"})," "]})]})]})})]})})},E=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),s=t[0],a=t[1],r=Object(c.useState)(""),n=Object(l.a)(r,2),i=n[0],o=n[1],d=Object(c.useState)(""),j=Object(l.a)(d,2),m=j[0],p=j[1],h=Object(c.useState)(""),f=Object(l.a)(h,2),v=f[0],g=f[1],N=function(){var e=Object(b.a)(x.a.mark((function e(t){var c,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=JSON.parse(localStorage.getItem("id")),e.prev=2,e.next=5,O.a.post("http://localhost:3001/profile/addpost",{id:c,title:i,image:m,description:v});case 5:r=e.sent,console.log(r),a(!s),window.location.reload(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:s?"flex":"hidden",children:Object(u.jsx)("div",{className:"w-2/4 h-5/6  inset-32  absolute rounded-lg  bg-white shadow-2xl border-2 border-red-600 mx-auto ",children:Object(u.jsx)("div",{className:"flex flex-col justify-center items-center px-8 pt-6 pb-8 mb-4",children:Object(u.jsxs)("form",{className:"w-9/12",onSubmit:N,children:[Object(u.jsx)("div",{className:"flex items-center mb-12",children:Object(u.jsx)("input",{type:"text",onChange:function(e){return o(e.target.value)},placeholder:"Title",className:"shadow hidden sm:flex w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md "})}),Object(u.jsx)("div",{className:"flex items-center mb-12 w-full",children:Object(u.jsx)("input",{type:"text",onChange:function(e){return p(e.target.value)},placeholder:"Picture URL",className:"shadow hidden sm:flex w-full  appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md "})}),Object(u.jsx)("div",{className:"flex items-center mb-12",children:Object(u.jsx)("textarea",{onChange:function(e){return g(e.target.value)},id:"tx1",name:"description",placeholder:"Add a desctiption",className:"w-full h-40 shadow hidden sm:flex   appearance-none border rounded  py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline text-md"})}),Object(u.jsxs)("div",{className:"flex items-center justify-center",children:[Object(u.jsx)("button",{type:"submit",className:"rounded-lg border-2 px-6 py-2 border-red-600 ",children:"Add Post"}),Object(u.jsxs)("button",{onClick:function(e){return function(e){e.preventDefault(),a(!0!==s)}(e)},className:"ml-3 rounded-lg border-2 px-6 py-2 border-red-600",children:[" ","Discard"]})]})]})})})})},B=function e(t){var s=t.id,r=t.picture,n=t.handlePost,d=t.reacts,j=Object(c.useState)(!1),m=Object(l.a)(j,2),h=m[0],v=m[1],g=Object(c.useState)(d),w=Object(l.a)(g,2),y=w[0],S=w[1],k=Object(c.useState)(!1),I=Object(l.a)(k,2),J=I[0],C=I[1],_=Object(c.useState)(""),P=Object(l.a)(_,2),D=P[0],E=P[1],B=Object(c.useState)([]),q=Object(l.a)(B,2),R=q[0],T=q[1],A=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,O.a.get("http://localhost:3001/profilepost/".concat(s));case 4:t=e.sent,v(!1),T(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(window.localStorage.getItem("id")),!1!==J){e.next=16;break}return S(y+1),C(!0),e.prev=4,e.next=7,O.a.put("http://localhost:3001/addlike",{id:s,like:1});case 7:return e.next=9,O.a.post("http://localhost:3001/addlike/likes",{userId:t,postId:s});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:e.next=22;break;case 16:return S(y-1),C(!1),e.next=20,O.a.put("http://localhost:3001/removelike",{id:s,likes:-1});case 20:return e.next=22,O.a.post("http://localhost:3001/removelike/likes",{userId:t,postId:s});case 22:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(x.a.mark((function e(t){var c,a,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=JSON.parse(window.localStorage.getItem("id")),a=JSON.parse(window.localStorage.getItem("userName")),t.preventDefault(),e.prev=3,e.next=6,O.a.post("http://localhost:3001/addcomment",{userId:c,postId:s,comment:D});case 6:r=e.sent,n={_id:r.data._id,userId:{_id:c,userName:a},description:D},T([].concat(Object(p.a)(R),[n])),E(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("http://localhost:3001/removecomment",{commId:t});case 2:s=R.filter((function(e){return e._id!==t})),T(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JSON.parse(localStorage.getItem("id"));case 2:return t=e.sent,e.prev=3,e.next=6,O.a.post("http://localhost:3001/getlike",{userId:t,postId:s});case 6:"Likes found"===e.sent.data.message?C(!0):C(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){A(),U()}),[e]);var V=JSON.parse(localStorage.getItem("picture")),Y=(JSON.parse(window.localStorage.getItem("id")),JSON.parse(window.localStorage.getItem("userName")));return Object(u.jsxs)("div",{className:" flex justify-center bg-gray-200 top-40 left-44   absolute shadow-2xl ",children:[Object(u.jsx)("div",{className:" h-2/3",style:{width:"38rem"},children:Object(u.jsx)("img",{className:"  object-cover",src:r,alt:"",style:{height:"32rem"}})}),Object(u.jsx)("div",{className:"w-96 mt-3",children:Object(u.jsxs)("div",{className:"flex flex-col justify-between items-start ml-4 w-96 ",children:[Object(u.jsxs)("div",{className:"flex items-center mb-3  ",children:[Object(u.jsx)("img",{src:V,width:"45",className:"rounded-full border-2  border-gray-200",alt:""}),Object(u.jsx)("p",{className:"text-xs ml-3 font-semibold",children:Y})]}),Object(u.jsx)("div",{className:"h-80 overflow-y-scroll w-full scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-100",children:!0===h?Object(u.jsx)("div",{className:"flex justify-center items-center mt-5 ",children:Object(u.jsx)(N.a,{type:"Oval",color:"#D0312D",height:35,width:35})}):Object(u.jsx)(a.a.Fragment,{children:R.map((function(e){return Object(u.jsxs)("div",{className:"flex justify-between items-center",children:[Object(u.jsxs)("div",{className:" pt-2 text-sm flex gap-2 items-center",children:[Object(u.jsx)("div",{className:"font-semibold ",children:Object(u.jsx)("img",{src:e.userId.userPicture,width:"45",className:"rounded-full border-2  border-gray-200",alt:""})}),Object(u.jsxs)("div",{className:"font-semibold ml-1 ",children:[e.userId.userName," :"]}),Object(u.jsx)("div",{children:e.description})]}),e.userId._id===JSON.parse(localStorage.getItem("id"))&&Object(u.jsx)("div",{className:"px-3",onClick:function(){return G(e._id)},children:Object(u.jsx)(i.a,{icon:f.f,className:"text-sm cursor-pointer "})})]})}))})}),Object(u.jsx)("div",{className:"flex justify-between items-center px-3 pt-3",children:Object(u.jsxs)("div",{className:"flex",children:[J?Object(u.jsx)(i.a,{icon:f.c,className:"text-2xl cursor-pointer text-red-600 mr-0 ",onClick:F}):Object(u.jsx)(i.a,{icon:f.c,className:"text-2xl cursor-pointer  mr-0 ",onClick:F}),Object(u.jsx)(i.a,{icon:f.b,className:"text-2xl cursor-pointer ml-4 "}),Object(u.jsx)(i.a,{icon:f.d,className:"text-2xl cursor-pointer ml-3 "})]})}),Object(u.jsx)("div",{className:"flex",children:Object(u.jsxs)("p",{className:"px-3 pt-1 font-semibold ",children:[y," likes"]})}),Object(u.jsx)("form",{onSubmit:L,className:"w-full",children:Object(u.jsxs)("div",{className:"flex justify-between items-center p-4 mt-3 border-2 rounded-lg border-black-100",children:[Object(u.jsxs)("div",{className:"flex gap-3",children:[Object(u.jsx)(i.a,{icon:f.e,className:"text-2xl cursor-pointer "}),Object(u.jsx)("input",{type:"text",placeholder:"Add a comment...",className:"border-0 focus:outline-none text-sm w-full",onChange:function(e){return E(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",className:"text-blue-500 cursor-pointer text-sm font-semibold",children:"Post"})})]})})]})}),Object(u.jsx)("div",{children:Object(u.jsx)(i.a,{icon:o.h,className:"text-xl m-2  cursor-pointer text-red-600 hover:opacity-80 ",onClick:function(){return n(!1)}})})]})},q=function(){var e=Object(c.useRef)(null),t=Object(c.useState)(""),s=Object(l.a)(t,2),r=s[0],n=s[1],d=Object(c.useState)(""),m=Object(l.a)(d,2),p=m[0],h=m[1],f=Object(c.useState)(!1),v=Object(l.a)(f,2),g=v[0],w=v[1],y=Object(c.useState)([]),S=Object(l.a)(y,2),k=S[0],I=S[1],J=Object(c.useState)(0),C=Object(l.a)(J,2),_=C[0],P=C[1],D=Object(c.useState)(0),q=Object(l.a)(D,2),R=q[0],T=q[1],A=JSON.parse(localStorage.getItem("id")),F=function(){var t=Object(b.a)(x.a.mark((function t(){var s,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w(!0),t.next=4,O.a.get("http://localhost:3001/myposts/".concat(A));case 4:s=t.sent,w(!1),c=s.data,e.current&&P(c.length),e.current&&I(c),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),L=function(e){W(!0===e)};Object(c.useEffect)((function(){e.current&&F()}),[]);var G=Object(c.useState)(!1),U=Object(l.a)(G,2),V=U[0],Y=U[1],z=Object(c.useState)(!1),H=Object(l.a)(z,2),M=H[0],W=H[1],K=JSON.parse(localStorage.getItem("fullName")),Q=JSON.parse(localStorage.getItem("userName")),X=JSON.parse(localStorage.getItem("picture"));return Object(u.jsxs)("div",{ref:e,children:[Object(u.jsx)(j,{}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"flex flex-col px px-6 py-12 ",children:[Object(u.jsxs)("div",{className:"flex mb-8 px-16 ",children:[Object(u.jsx)("div",{className:"mr-8",children:Object(u.jsx)("img",{src:X,alt:"profile",className:"rounded-full w-36"})}),Object(u.jsxs)("div",{className:"ml-9 flex-col flex-auto  ",children:[Object(u.jsxs)("div",{className:"flex gap-7  items-center mb-3  ",children:[Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"font-semibold text-lg",children:Q})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"button",className:" border-2 border-gray-100 rounded-lg p-1",children:"Edit Profile"})}),Object(u.jsx)("div",{children:Object(u.jsx)(i.a,{icon:o.b,className:"text-xl  cursor-pointer "})}),Object(u.jsx)("div",{onClick:function(){Y(!1===V)},children:Object(u.jsx)(i.a,{icon:o.f,className:"text-xl  cursor-pointer "})})]}),Object(u.jsxs)("div",{className:"flex justify-between mb-5  ",children:[Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{className:"font-semibold",children:_})," posts"]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{className:"font-semibold",children:"0"})," followers"]})}),Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{className:"font-semibold",children:"0"})," following"]})}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"font-semibold text-md",children:K})})]})]}),Object(u.jsxs)("div",{className:"flex justify-evenly   border-t-2 border-gray-200 mb-5 ",children:[Object(u.jsx)("div",{className:"text-black mt-5",children:"POSTS"}),Object(u.jsx)("div",{className:"text-gray-400 mt-5",children:"IGTV"}),Object(u.jsx)("div",{className:"text-gray-400 mt-5",children:"SAVED"}),Object(u.jsx)("div",{className:"text-gray-400 mt-5",children:"TAGGED"})]}),!0===g?Object(u.jsx)("div",{className:"flex justify-center items-center mt-20 ",children:Object(u.jsx)(N.a,{type:"Oval",color:"#D0312D",height:45,width:45})}):Object(u.jsx)("div",{className:"grid grid-cols-3 max-h-80 gap-2 ",children:Object(u.jsx)(a.a.Fragment,{children:k.map((function(e,t){return Object(u.jsx)("div",{className:"col-span-1 cursor-pointer",onClick:function(t){!function(e,t,s){console.log(e),h(e),n(t),T(s),console.log(s),console.log(t)}(e._id,e.image,e.likes),L(!0)},children:Object(u.jsx)("img",{className:"h-80  w-full object-cover\t",src:e.image,alt:""})},e._id)}))})}),!0===M&&Object(u.jsx)(B,{id:p,picture:r,handlePost:L,reacts:R})]}),!0===V&&Object(u.jsx)(E,{})]})]})},R=s(120),T=function(){var e=Object(c.useRef)(null),t=JSON.parse(localStorage.getItem("id")),s=(JSON.parse(localStorage.getItem("fullName")),JSON.parse(localStorage.getItem("userName"))),r=JSON.parse(localStorage.getItem("picture")),n=Object(c.useState)(!1),d=Object(l.a)(n,2),m=d[0],h=d[1],v=Object(c.useState)(!1),g=Object(l.a)(v,2),w=g[0],y=g[1],S=Object(c.useState)(""),I=Object(l.a)(S,2),J=I[0],C=I[1],_=Object(c.useState)(!1),P=Object(l.a)(_,2),D=P[0],E=P[1],B=Object(c.useState)([]),q=Object(l.a)(B,2),T=q[0],A=q[1],F=Object(c.useState)(""),L=Object(l.a)(F,2),G=L[0],U=L[1],V=Object(c.useState)(""),Y=Object(l.a)(V,2),z=Y[0],H=Y[1],M=Object(c.useState)(s),W=Object(l.a)(M,2),K=(W[0],W[1]),Q=Object(c.useState)(""),X=Object(l.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)([]),te=Object(l.a)(ee,2),se=te[0],ce=te[1],ae=function(){var e=Object(b.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,O.a.get("http://localhost:3001/getusersgroup");case 4:t=e.sent,h(!1),A(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(x.a.mark((function e(s,c,a){var r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.prev=1,e.next=4,O.a.post("http://localhost:3001/addconversation",{user1Id:t,user2Id:s});case 4:return r=e.sent,console.log(r.data),H(r.data._id),r.data.user1!==t?$(r.data.user1):$(r.data.user2),U(r.data._id),y(!0),e.next=12,O.a.get("http://localhost:3001/getconversation/".concat(r.data._id));case 12:n=e.sent,y(!1),ce(n.data),console.log(se),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,s,c){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){ae(),(k=Object(R.a)("http://localhost:5000")).emit("registre",t)}),[]);var ne=function(){var s=Object(b.a)(x.a.mark((function s(c){var a;return x.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c.preventDefault(),""===e.current.value){s.next=17;break}return a={conversationId:G,senderId:{_id:t,userPicture:r},receiverId:Z,text:J},e.current.value="",C(""),s.next=7,k.emit("send_message",a);case 7:return ce([].concat(Object(p.a)(se),[a])),s.prev=8,s.next=11,O.a.post("http://localhost:3001/addmessage",{conversationId:z,senderId:t,text:a.text});case 11:s.sent,s.next=17;break;case 14:s.prev=14,s.t0=s.catch(8),console.log(s.t0);case 17:case"end":return s.stop()}}),s,null,[[8,14]])})));return function(e){return s.apply(this,arguments)}}();return Object(c.useEffect)((function(){k.on("receive_message",(function(e){console.log(e),K(e.senderName),e.senderId._id===Z&&ce([].concat(Object(p.a)(se),[e]))}))})),Object(u.jsxs)("div",{children:[Object(u.jsx)(j,{}),Object(u.jsxs)("div",{className:"grid grid-cols-5 h-96 mt-10 border-2 border-gray-200 rounded-md  ",children:[Object(u.jsx)("div",{className:"col-span-2 border-r-2 border-gray-200 overflow-y-scroll scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-100  ",children:!1===m?Object(u.jsxs)("div",{className:"flex flex-col ",children:[Object(u.jsxs)("div",{className:"flex justify-center pt-3 mb-2 border-b-2 border-gray-200 pb-3",children:[Object(u.jsx)("div",{className:"font-semibold",children:s}),Object(u.jsx)("hr",{})]}),T.map((function(e){return Object(u.jsx)("div",{className:"flex  items-center p-2  cursor-pointer hover:bg-gray-200 transition duration-200 ease-in-out",onClick:function(){return re(e._id,e.userName,e.userPicture)},children:Object(u.jsxs)("div",{className:"flex items-center ml-10",children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:e.userPicture,width:"50",className:"rounded-full flex-grow-0",alt:""})}),Object(u.jsxs)("div",{className:"ml-3",children:[Object(u.jsx)("p",{className:"text-xs mt-1  cursor-pointer",children:e.userName}),Object(u.jsx)("p",{className:"text-xs  text-gray-500 font-light"})]})]})},e._id)}))]}):Object(u.jsx)("div",{className:"flex justify-center items-center mt-20 ",children:Object(u.jsx)(N.a,{type:"Oval",color:"#D0312D",height:45,width:45})})}),Object(u.jsxs)("div",{className:"col-span-3 flex flex-col justify-between relative z-10   ",children:[Object(u.jsx)("div",{className:"flex flex-col justify-center   mt-7 ",children:D?!0===w?Object(u.jsx)("div",{className:"flex justify-center items-center mt-20 ",children:Object(u.jsx)(N.a,{type:"Oval",color:"#D0312D",height:45,width:45})}):Object(u.jsx)(a.a.Fragment,{children:se.map((function(e,s){return e.senderId._id===t?Object(u.jsxs)("div",{className:"flex items-center ml-5 mb-3",children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:e.senderId.userPicture,width:"50",className:"rounded-full flex-grow-0",alt:""})}),Object(u.jsx)("div",{className:"ml-1",children:Object(u.jsx)("div",{className:"  bg-red-500 rounded-xl p-2 text-white break-words max-w-xs  ",children:e.text})})]},s):Object(u.jsxs)("div",{className:"flex items-center justify-end ml-5 mb-3 mr-5",children:[Object(u.jsx)("div",{className:"ml-1 ",children:Object(u.jsx)("div",{className:"  bg-gray-200 rounded-xl p-2 break-words max-w-xs ",children:e.text})}),Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:e.senderId.userPicture,width:"50",className:"rounded-full flex-grow-0",alt:""})})]},s)}))}):Object(u.jsxs)("div",{className:"flex flex-col items-center mt-16",children:[Object(u.jsx)("div",{className:"rounded-3xl border-2 border-black p-3 ",children:Object(u.jsx)(i.a,{icon:o.e,className:"text-4xl  "})}),Object(u.jsx)("div",{className:"mt-5 font-semibold",children:"Your messages"}),Object(u.jsx)("div",{className:"mt-2",children:"Send your messages to your friends"})]})}),D?Object(u.jsx)("form",{onSubmit:function(e){return ne(e)},children:Object(u.jsxs)("div",{className:"flex justify-between absolute z-20 bottom-0 w-full items-center p-3 mt-3 border-t-2 border-gray-200 rounded-lg ",children:[Object(u.jsxs)("div",{className:"flex gap-3",children:[Object(u.jsx)(i.a,{icon:f.e,className:"text-2xl cursor-pointer text-black "}),Object(u.jsx)("input",{ref:e,type:"text",placeholder:"Your message...",className:"border-0 focus:outline-none text-sm",onChange:function(e){return C(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",className:" cursor-pointer text-sm font-semibold",children:Object(u.jsx)("div",{className:"rounded-3xl border-2 border-black p-1 hover:border-red-600 ",children:Object(u.jsx)(i.a,{icon:o.e,className:"text-lg  "})})})})]})}):Object(u.jsx)("div",{className:"hidden",children:" "})]})]})]})},A=function(){return Object(u.jsx)(d.a,{children:Object(u.jsxs)(_.c,{children:[Object(u.jsx)(_.a,{exact:!0,path:"/main",children:Object(u.jsx)("div",{className:"lg:mx-48",children:Object(u.jsx)(I,{})})}),Object(u.jsx)(_.a,{exact:!0,path:"/",children:Object(u.jsx)("div",{className:"lg:mx-48",children:Object(u.jsx)(D,{})})}),Object(u.jsx)(_.a,{exact:!0,path:"/login",children:Object(u.jsx)("div",{className:"lg:mx-48",children:Object(u.jsx)(P,{})})}),Object(u.jsx)(_.a,{path:"/profile",children:Object(u.jsx)("div",{className:"lg:mx-48",children:Object(u.jsx)(q,{})})}),Object(u.jsx)(_.a,{path:"/chat",children:Object(u.jsx)("div",{className:"lg:mx-48 ",children:Object(u.jsx)(T,{})})}),Object(u.jsx)(_.a,{path:"*",children:Object(u.jsx)("div",{className:"lg:mx-48 h-screen",children:Object(u.jsx)(S,{})})})]})})};s(274);n.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root"))}},[[275,1,2]]]);
//# sourceMappingURL=main.9d4246a8.chunk.js.map